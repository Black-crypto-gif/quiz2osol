import { useState } from "react";

const questions = [
  {
    question: "ما الحكمة من بدء المؤلف كتابه بالبسملة؟",
    options: [
      "اقتداء بكتاب الله",
      "اتباعًا لحديث النبي صلى الله عليه وسلم",
      "الاقتداء بالرسول صلى الله عليه وسلم",
      "جميع ما سبق",
    ],
    answer: "جميع ما سبق",
  },
  {
    question: "ما تقدير الجار والمجرور في 'بسم الله'؟",
    options: [
      "بسم الله أبدأ",
      "بسم الله أكتب",
      "بسم الله أصنف",
      "بسم الله أقرأ",
    ],
    answer: "بسم الله أكتب",
  },
  {
    question: "ما الفرق بين اسمي 'الرحمن' و'الرحيم'؟",
    options: [
      "الرحمن يختص بالله فقط، والرحيم يطلق على الله وغيره",
      "الرحمن يطلق على الله وغيره، والرحيم يختص بالله فقط",
      "لا فرق بينهما",
      "كلاهما يطلق على الله فقط",
    ],
    answer: "الرحمن يختص بالله فقط، والرحيم يطلق على الله وغيره",
  },
  {
    question: "ما هي مراتب الإدراك الست؟",
    options: [
      "العلم، الجهل البسيط، الجهل المركب، الوهم، الشك، الظن",
      "العلم، الجهل، الوهم، الشك، الظن، اليقين",
      "العلم، الجهل البسيط، الجهل المركب، الوهم، الشك، اليقين",
      "العلم، الجهل، الوهم، الشك، الظن، اليقين",
    ],
    answer: "العلم، الجهل البسيط، الجهل المركب، الوهم، الشك، الظن",
  },
  {
    question: "ما الفرق بين العلم الضروري والعلم النظري؟",
    options: [
      "العلم الضروري يحتاج إلى استدلال، والعلم النظري لا يحتاج",
      "العلم الضروري لا يحتاج إلى استدلال، والعلم النظري يحتاج",
      "لا فرق بينهما",
      "العلم الضروري يتعلق بالدين، والعلم النظري يتعلق بالدنيا",
    ],
    answer: "العلم الضروري لا يحتاج إلى استدلال، والعلم النظري يحتاج",
  },
  {
    question: "ما هي المسائل الأربع التي يجب تعلمها؟",
    options: [
      "معرفة الله، معرفة النبي، معرفة الدين الإسلامي، معرفة الأحكام الشرعية",
      "معرفة الله، معرفة الملائكة، معرفة الكتب، معرفة اليوم الآخر",
      "معرفة الله، معرفة النبي، معرفة الدين الإسلامي، معرفة الآيات الكونية",
      "معرفة الله، معرفة النبي، معرفة الدين الإسلامي، معرفة الشريعة",
    ],
    answer: "معرفة الله، معرفة النبي، معرفة الدين الإسلامي، معرفة الشريعة",
  },
  {
    question: "ما معنى 'الله' في قوله تعالى: {اللَّهُ الَّذِي لَهُ مَا فِي السَّمَاوَاتِ وَمَا فِي الْأَرْضِ}؟",
    options: [
      "لفظ الجلالة صفة لله",
      "لفظ الجلالة عطف بيان",
      "لفظ الجلالة تابع تبعية النعت للمنعوت",
      "لفظ الجلالة اسم علم فقط",
    ],
    answer: "لفظ الجلالة عطف بيان",
  },
  {
    question: "ما معنى 'الرحمن'؟",
    options: [
      "ذو الرحمة الواسعة",
      "ذو الرحمة الواصلة",
      "المتسامح",
      "المغفور له",
    ],
    answer: "ذو الرحمة الواسعة",
  },
  {
    question: "ما معنى 'الرحيم'؟",
    options: [
      "ذو الرحمة الواسعة",
      "ذو الرحمة الواصلة",
      "المتسامح",
      "المغفور له",
    ],
    answer: "ذو الرحمة الواصلة",
  },
  {
    question: "ما هي الآية التي تدل على أن الله يعذب من يشاء ويرحم من يشاء؟",
    options: [
      "{يُعَذِّبُ مَنْ يَشَاءُ وَيَرْحَمُ مَنْ يَشَاءُ وَإِلَيْهِ تُقْلَبُونَ}",
      "{وَاعْبُدُوا اللَّهَ وَلا تُشْرِكُوا بِهِ شَيْئاً}",
      "{قُلْ هُوَ اللَّهُ أَحَدٌ}",
      "{الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ}",
    ],
    answer: "{يُعَذِّبُ مَنْ يَشَاءُ وَيَرْحَمُ مَنْ يَشَاءُ وَإِلَيْهِ تُقْلَبُونَ}",
  },
  {
    question: "ما هي الآية التي تدل على وجود آيات في الأرض للعالمين؟",
    options: [
      "{وَفِي الْأَرْضِ آيَاتٌ لِلْمُوقِنِينَ وَفِي أَنْفُسِكُمْ أَفَلا تُبْصِرُونَ}",
      "{وَاعْبُدُوا اللَّهَ وَلا تُشْرِكُوا بِهِ شَيْئاً}",
      "{قُلْ هُوَ اللَّهُ أَحَدٌ}",
      "{الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ}",
    ],
    answer: "{وَفِي الْأَرْضِ آيَاتٌ لِلْمُوقِنِينَ وَفِي أَنْفُسِكُمْ أَفَلا تُبْصِرُونَ}",
  },
  {
    question: "ما هي الآية التي تدل على وجوب تحكيم الرسول صلى الله عليه وسلم؟",
    options: [
      "{فَلا وَرَبِّكَ لا يُؤْمِنُونَ حَتَّى يُحَكِّمُوكَ فِيمَا شَجَرَ بَيْنَهُمْ}",
      "{وَاعْبُدُوا اللَّهَ وَلا تُشْرِكُوا بِهِ شَيْئاً}",
      "{قُلْ هُوَ اللَّهُ أَحَدٌ}",
      "{الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ}",
    ],
    answer: "{فَلا وَرَبِّكَ لا يُؤْمِنُونَ حَتَّى يُحَكِّمُوكَ فِيمَا شَجَرَ بَيْنَهُمْ}",
  },
  {
    question: "ما هي الآية التي تدل على أن الإسلام هو دين الله منذ إرسال الرسل؟",
    options: [
      "{رَبَّنَا وَاجْعَلْنَا مُسْلِمَيْنِ لَكَ وَمِنْ ذُرِّيَّتِنَا أُمَّةً مُسْلِمَةً}",
      "{وَاعْبُدُوا اللَّهَ وَلا تُشْرِكُوا بِهِ شَيْئاً}",
      "{قُلْ هُوَ اللَّهُ أَحَدٌ}",
      "{الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ}",
    ],
    answer: "{رَبَّنَا وَاجْعَلْنَا مُسْلِمَيْنِ لَكَ وَمِنْ ذُرِّيَّتِنَا أُمَّةً مُسْلِمَةً}",
  },
  {
    question: "ما هو الدين المقبول عند الله؟",
    options: [
      "الإسلام",
      "اليهودية",
      "النصرانية",
      "جميع الأديان",
    ],
    answer: "الإسلام",
  },
  {
    question: "ما هي الآية التي تدل على أن الإسلام هو الدين الوحيد المقبول عند الله؟",
    options: [
      "{إِنَّ الدِّينَ عِنْدَ اللَّهِ الْأِسْلامُ}",
      "{وَمَنْ يَبْتَغِ غَيْرَ الْأِسْلامِ دِيناً فَلَنْ يُقْبَلَ مِنْهُ}",
      "{الْيَوْمَ أَكْمَلْتُ لَكُمْ دِينَكُمْ وَأَتْمَمْتُ عَلَيْكُمْ نِعْمَتِي}",
      "جميع ما سبق",
    ],
    answer: "جميع ما سبق",
  },
  {
    question: "ما هي أنواع الأدلة على معرفة الله؟",
    options: [
      "السمعية والعقلية",
      "السمعية فقط",
      "العقلية فقط",
      "لا يوجد أدلة",
    ],
    answer: "السمعية والعقلية",
  },
  {
    question: "ما هي الآية التي تدل على أن محمدًا رسول الله؟",
    options: [
      "{مُحَمَّدٌ رَسُولُ اللَّهِ وَالَّذِينَ مَعَهُ}",
      "{وَمَا مُحَمَّدٌ إِلَّا رَسُولٌ قَدْ خَلَتْ مِنْ قَبْلِهِ الرُّسُلُ}",
      "{قُلْ هُوَ اللَّهُ أَحَدٌ}",
      "{الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ}",
    ],
    answer: "{مُحَمَّدٌ رَسُولُ اللَّهِ وَالَّذِينَ مَعَهُ}",
  },
  {
    question: "ما هي مراتب الدعوة إلى الله؟",
    options: [
      "بالحكمة، الموعظة الحسنة، الجدال بالتي هي أحسن",
      "بالقوة، بالحكمة، بالموعظة الحسنة",
      "بالجدال، بالموعظة الحسنة، بالقوة",
      "بالحكمة، بالموعظة الحسنة، بالقوة",
    ],
    answer: "بالحكمة، الموعظة الحسنة، الجدال بالتي هي أحسن",
  },
  {
    question: "ما هي الآية التي تدل على وجوب الدعوة إلى الله على بصيرة؟",
    options: [
      "{قُلْ هَذِهِ سَبِيلِي أَدْعُو إِلَى اللَّهِ عَلَى بَصِيرَةٍ}",
      "{ادْعُ إِلَى سَبِيلِ رَبِّكَ بِالْحِكْمَةِ وَالْمَوْعِظَةِ الْحَسَنَةِ}",
      "{وَلا تُجَادِلُوا أَهْلَ الْكِتَابِ إِلَّا بِالَّتِي هِيَ أَحْسَنُ}",
      "{إِنَّ الدِّينَ عِنْدَ اللَّهِ الْأِسْلامُ}",
    ],
    answer: "{قُلْ هَذِهِ سَبِيلِي أَدْعُو إِلَى اللَّهِ عَلَى بَصِيرَةٍ}",
  },
  {
    question: "ما هي وظيفة الرسل عليهم الصلاة والسلام؟",
    options: [
      "الدعوة إلى الله",
      "الجهاد في سبيل الله",
      "تعليم الناس العلوم الدنيوية",
      "جميع ما سبق",
    ],
    answer: "الدعوة إلى الله",
  },
  {
    question: "ما هو الحديث الذي يدل على فضل الدعوة إلى الهدى؟",
    options: [
      "من دعا إلى الهدى كان له من الأجر مثل أجور من تبعه",
      "من دل على خير فله مثل أجر فاعله",
      "أنفذ على رسلك حتى تنزل بساحتهم",
      "جميع ما سبق",
    ],
    answer: "جميع ما سبق",
  },
  {
    question: "ما هي الآية التي تدل على صبر الرسل على الأذى؟",
    options: [
      "{وَلَقَدْ كُذِّبَتْ رُسُلٌ مِنْ قَبْلِكَ فَصَبَرُوا عَلَى مَا كُذِّبُوا وَأُوذُوا}",
      "{كَذَلِكَ مَا أَتَى الَّذِينَ مِنْ قَبْلِهِمْ مِنْ رَسُولٍ إِلَّا قَالُوا سَاحِرٌ أَوْ مَجْنُونٌ}",
      "{وَكَذَلِكَ جَعَلْنَا لِكُلِّ نَبِيٍّ عَدُوّاً مِنَ الْمُجْرِمِينَ}",
      "جميع ما سبق",
    ],
    answer: "جميع ما سبق",
  },
  {
    question: "ما هي الآية التي تدل على أن الله أمر نبيه بالصبر؟",
    options: [
      "{فَاصْبِرْ لِحُكْمِ رَبِّكَ}",
      "{إِنَّا نَحْنُ نَزَّلْنَا عَلَيْكَ الْقُرْآنَ تَنْزِيلاً}",
      "{وَلَقَدْ كُذِّبَتْ رُسُلٌ مِنْ قَبْلِكَ فَصَبَرُوا عَلَى مَا كُذِّبُوا وَأُوذُوا}",
      "{كَذَلِكَ مَا أَتَى الَّذِينَ مِنْ قَبْلِهِمْ مِنْ رَسُولٍ إِلَّا قَالُوا سَاحِرٌ أَوْ مَجْنُونٌ}",
    ],
    answer: "{فَاصْبِرْ لِحُكْمِ رَبِّكَ}",
  },
  {
    question: "ما هو الحديث الذي يدل على فضل الصبر على الأذى في سبيل الله؟",
    options: [
      "اللهم اغفر لقومي فإنهم لا يعلمون",
      "من دعا إلى الهدى كان له من الأجر مثل أجور من تبعه",
      "من دل على خير فله مثل أجر فاعله",
      "أنفذ على رسلك حتى تنزل بساحتهم",
    ],
    answer: "اللهم اغفر لقومي فإنهم لا يعلمون",
  },
  {
    question: "ما هي مراتب الصبر التي ذكرها المؤلف؟",
    options: [
      "الصبر على طاعة الله، الصبر عن محارم الله، الصبر على أقدار الله",
      "الصبر على الأذى، الصبر على الفقر، الصبر على المرض",
      "الصبر على الدعوة، الصبر على الجهاد، الصبر على العلم",
      "الصبر على الفرح، الصبر على الحزن، الصبر على الغضب",
    ],
    answer: "الصبر على طاعة الله، الصبر عن محارم الله، الصبر على أقدار الله",
  },
  {
    question: "ما هي الآية التي تدل على أن الإنسان في خسر إلا من اتصف بصفات معينة؟",
    options: [
      "{وَالْعَصْرِ إِنَّ الْإِنْسَانَ لَفِي خُسْرٍ إِلَّا الَّذِينَ آمَنُوا وَعَمِلُوا الصَّالِحَاتِ وَتَوَاصَوْا بِالْحَقِّ وَتَوَاصَوْا بِالصَّبْرِ}",
      "{إِنَّ اللَّهَ مَعَ الصَّابِرِينَ}",
      "{وَاسْتَعِينُوا بِالصَّبْرِ وَالصَّلَاةِ}",
      "{وَلَنَبْلُوَنَّكُمْ بِشَيْءٍ مِنَ الْخَوْفِ وَالْجُوعِ}",
    ],
    answer: "{وَالْعَصْرِ إِنَّ الْإِنْسَانَ لَفِي خُسْرٍ إِلَّا الَّذِينَ آمَنُوا وَعَمِلُوا الصَّالِحَاتِ وَتَوَاصَوْا بِالْحَقِّ وَتَوَاصَوْا بِالصَّبْرِ}",
  },
  {
    question: "ما هي الصفات الأربع التي تجنب الإنسان الخسران؟",
    options: [
      "الإيمان، العمل الصالح، التواصي بالحق، التواصي بالصبر",
      "الصلاة، الصوم، الزكاة، الحج",
      "الصبر، الشكر، التوكل، الرضا",
      "العلم، العمل، الدعوة، الصبر",
    ],
    answer: "الإيمان، العمل الصالح، التواصي بالحق، التواصي بالصبر",
  },
  {
    question: "ما هي مراتب جهاد النفس التي ذكرها ابن القيم؟",
    options: [
      "تعلم الهدى، العمل به، الدعوة إليه، الصبر على مشاق الدعوة",
      "الصبر على الأذى، الصبر على الفقر، الصبر على المرض",
      "الجهاد في سبيل الله، الأمر بالمعروف، النهي عن المنكر، الدعوة إلى الله",
      "التوكل على الله، الرضا بالقضاء، الشكر على النعم، الصبر على البلاء",
    ],
    answer: "تعلم الهدى، العمل به، الدعوة إليه، الصبر على مشاق الدعوة",
  },
  {
    question: "ما هي الآية التي تدل على أن الله خلق الإنسان من طين؟",
    options: [
      "{هُوَ الَّذِي خَلَقَكُمْ مِنْ طِينٍ}",
      "{وَلَقَدْ خَلَقْنَا الْإِنْسَانَ مِنْ صَلْصَالٍ مِنْ حَمَأٍ مَسْنُونٍ}",
      "{خَلَقَ الْإِنْسَانَ مِنْ صَلْصَالٍ كَالْفَخَّارِ}",
      "جميع ما سبق",
    ],
    answer: "جميع ما سبق",
  },
  {
    question: "ما هو الدليل العقلي على أن الله خلقنا؟",
    options: [
      "أن الإنسان لم يخلق نفسه ولا خلقه أحد من الخلق، ولا يمكن أن يكون وجوده صدفة",
      "أن الله ذكر في القرآن أنه خلق الإنسان من طين",
      "أن الأنبياء أخبروا أن الله هو الخالق",
      "أن العلماء أثبتوا أن الخلق يحتاج إلى خالق",
    ],
    answer: "أن الإنسان لم يخلق نفسه ولا خلقه أحد من الخلق، ولا يمكن أن يكون وجوده صدفة",
  },
  {
    question: "ما هي الآية التي تدل على أن الله هو الرزاق؟",
    options: [
      "{إِنَّ اللَّهَ هُوَ الرَّزَّاقُ ذُو الْقُوَّةِ الْمَتِينُ}",
      "{قُلْ مَنْ يَرْزُقُكُمْ مِنَ السَّمَاوَاتِ وَالْأَرْضِ قُلِ اللَّهُ}",
      "{قُلْ مَنْ يَرْزُقُكُمْ مِنَ السَّمَاءِ وَالْأَرْضِ أَمَّنْ يَمْلِكُ السَّمْعَ وَالْأَبْصَارَ}",
      "جميع ما سبق",
    ],
    answer: "جميع ما سبق",
  },
  {
    question: "ما هو الحديث الذي يدل على أن الله كتب رزق الإنسان وأجله وعمله؟",
    options: [
      "يبعث إليه ملك فيؤمر بأربع كلمات: بكتب رزقه وأجله، وعمله، وشقي أم سعيد",
      "من أحب أن يبسط له في رزقه وينسأ له في أثره فليصل رحمه",
      "اليد العليا خير من اليد السفلى، وابدأ بمن تعول",
      "من سره أن يبسط له في رزقه فليستغفر الله",
    ],
    answer: "يبعث إليه ملك فيؤمر بأربع كلمات: بكتب رزقه وأجله، وعمله، وشقي أم سعيد",
  },
  {
    question: "ما هي الآية التي تدل على أن الله أرسل الرسل ليقوم الحجة على الناس؟",
    options: [
      "{إِنَّا أَرْسَلْنَا إِلَيْكُمْ رَسُولاً شَاهِداً عَلَيْكُمْ كَمَا أَرْسَلْنَا إِلَى فِرْعَوْنَ رَسُولاً}",
      "{وَإِنْ مِنْ أُمَّةٍ إِلَّا خَلا فِيهَا نَذِيرٌ}",
      "{إِنَّا أَوْحَيْنَا إِلَيْكَ كَمَا أَوْحَيْنَا إِلَى نُوحٍ وَالنَّبِيِّينَ مِنْ بَعْدِهِ}",
      "جميع ما سبق",
    ],
    answer: "جميع ما سبق",
  },
  {
    question: "ما هي الآية التي تدل على أن من أطاع الله ورسوله دخل الجنة؟",
    options: [
      "{وَمَنْ يُطِعِ اللَّهَ وَرَسُولَهُ يُدْخِلْهُ جَنَّاتٍ تَجْرِي مِنْ تَحْتِهَا الْأَنْهَارُ}",
      "{وَمَنْ يُطِعِ اللَّهَ وَرَسُولَهُ وَيَخْشَ اللَّهَ وَيَتَّقْهِ فَأُولَئِكَ هُمُ الْفَائِزُونَ}",
      "{وَمَنْ يُطِعِ اللَّهَ وَرَسُولَهُ فَقَدْ فَازَ فَوْزاً عَظِيماً}",
      "جميع ما سبق",
    ],
    answer: "جميع ما سبق",
  },
  {
    question: "ما هي الآية التي تدل على أن من عصى الله ورسوله دخل النار؟",
    options: [
      "{وَمَنْ يَعْصِ اللَّهَ وَرَسُولَهُ وَيَتَعَدَّ حُدُودَهُ يُدْخِلْهُ نَاراً خَالِداً فِيهَا}",
      "{وَمَنْ يَعْصِ اللَّهَ وَرَسُولَهُ فَقَدْ ضَلَّ ضَلالاً مُبِيناً}",
      "{وَمَنْ يَعْصِ اللَّهَ وَرَسُولَهُ فَإِنَّ لَهُ نَارَ جَهَنَّمَ خَالِدِينَ فِيهَا أَبَداً}",
      "جميع ما سبق",
    ],
    answer: "جميع ما سبق",
  },
  {
    question: "ما هو الحديث الذي يدل على أن من أطاع الرسول دخل الجنة ومن عصاه دخل النار؟",
    options: [
      "كل أمتي يدخلون الجنة إلا من أبى، فقيل: ومن يأبى يا رسول الله؟ قال: من أطاعني دخل الجنة ومن عصاني دخل النار",
      "من أحب أن يبسط له في رزقه وينسأ له في أثره فليصل رحمه",
      "اليد العليا خير من اليد السفلى، وابدأ بمن تعول",
      "من سره أن يبسط له في رزقه فليستغفر الله",
    ],
    answer: "كل أمتي يدخلون الجنة إلا من أبى، فقيل: ومن يأبى يا رسول الله؟ قال: من أطاعني دخل الجنة ومن عصاني دخل النار",
  },
];

function Quiz({ setScore, setQuizStarted, saveScore }) {
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [selectedOption, setSelectedOption] = useState("");
  const [correctAnswers, setCorrectAnswers] = useState(0);

  const handleNext = () => {
    if (selectedOption === questions[currentQuestion].answer) {
      setCorrectAnswers((prev) => prev + 1); // Increment correct answers
    }
    setSelectedOption("");
    if (currentQuestion < questions.length - 1) {
      setCurrentQuestion((prev) => prev + 1);
    } else {
      const percentage = (correctAnswers / questions.length) * 100; // Calculate percentage
      setScore(percentage); // Update score in parent component
      saveScore(percentage); // Save percentage to Firestore
      setQuizStarted(false); // End the quiz
    }
  };

  return (
    <div className="quiz">
      <h2>{questions[currentQuestion].question}</h2>
      {questions[currentQuestion].options.map((option, index) => (
        <div key={index}>
          <label>
            <input
              type="radio"
              name="option"
              value={option}
              checked={selectedOption === option}
              onChange={() => setSelectedOption(option)}
            />
            {option}
          </label>
        </div>
      ))}
      <button onClick={handleNext}>التالي</button>
    </div>
  );
}

export default Quiz;