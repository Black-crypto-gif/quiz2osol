import { useState } from "react";

const questions = [
    {
      question: "ما هي الحكمة من بدء المؤلف كتابه بالبسملة؟",
      options: ["اقتداء بكتاب الله", "اتباعًا لحديث النبي صلى الله عليه وسلم", "الاقتداء بالرسول صلى الله عليه وسلم", "جميع ما سبق"],
      answer: "جميع ما سبق",
    },
    {
      question: "ما هو التقدير المحذوف للجار والمجرور في 'بسم الله'؟",
      options: ["بسم الله أبدأ", "بسم الله أكتب", "بسم الله أصنف", "بسم الله أقرأ"],
      answer: "بسم الله أكتب",
    },
    {
      question: "ما الفرق بين اسمي 'الرحمن' و'الرحيم'؟",
      options: [
        "الرحمن يختص بالله فقط، والرحيم يطلق على الله وغيره",
        "الرحمن يطلق على الله وغيره، والرحيم يختص بالله فقط",
        "لا فرق بينهما",
        "كلاهما يطلق على الله فقط",
      ],
      answer: "الرحمن يختص بالله فقط، والرحيم يطلق على الله وغيره",
    },
    {
      question: "ما هي أنواع التوحيد الثلاثة؟",
      options: [
        "توحيد الربوبية، توحيد الألوهية، توحيد الأسماء والصفات",
        "توحيد الخلق، توحيد العبادة، توحيد الأسماء",
        "توحيد الربوبية، توحيد الألوهية، توحيد القدر",
        "توحيد الأسماء، توحيد الصفات، توحيد العبادة",
      ],
      answer: "توحيد الربوبية، توحيد الألوهية، توحيد الأسماء والصفات",
    },
    {
      question: "ما هو الشرك الأكبر؟",
      options: [
        "كل شرك لا يخرج عن الملة",
        "كل شرك يخرج عن الملة",
        "كل عمل قولي أو فعلي أطلق عليه الشرع وصف الشرك",
        "كل ما يفعله الإنسان دون قصد",
      ],
      answer: "كل شرك يخرج عن الملة",
    },
    {
      question: "ما هي الأصول الثلاثة التي يجب على كل مسلم معرفتها؟",
      options: [
        "معرفة الله، معرفة النبي، معرفة الدين",
        "معرفة الله، معرفة الملائكة، معرفة الكتب",
        "معرفة الله، معرفة اليوم الآخر، معرفة القدر",
        "معرفة الله، معرفة الرسول، معرفة الدين الإسلامي",
      ],
      answer: "معرفة الله، معرفة النبي، معرفة الدين",
    },
    {
      question: "ما هي الآية التي تدل على أن الله خلقنا لعبادته؟",
      options: [
        "{وَمَا خَلَقْتُ الْجِنَّ وَالْإِنْسَ إِلَّا لِيَعْبُدُونِ}",
        "{إِنَّ اللَّهَ هُوَ الرَّزَّاقُ ذُو الْقُوَّةِ الْمَتِينُ}",
        "{قُلْ هُوَ اللَّهُ أَحَدٌ}",
        "{الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ}",
      ],
      answer: "{وَمَا خَلَقْتُ الْجِنَّ وَالْإِنْسَ إِلَّا لِيَعْبُدُونِ}",
    },
    {
      question: "ما هي مراتب الإدراك الست التي ذكرها المؤلف؟",
      options: [
        "العلم، الجهل البسيط، الجهل المركب، الوهم، الشك، الظن",
        "العلم، الجهل، الوهم، الشك، الظن، اليقين",
        "العلم، الجهل البسيط، الجهل المركب، الوهم، الشك، اليقين",
        "العلم، الجهل، الوهم، الشك، الظن، اليقين",
      ],
      answer: "العلم، الجهل البسيط، الجهل المركب، الوهم، الشك، الظن",
    },
    {
      question: "ما هو الفرق بين العلم الضروري والعلم النظري؟",
      options: [
        "العلم الضروري يحتاج إلى استدلال، والعلم النظري لا يحتاج",
        "العلم الضروري لا يحتاج إلى استدلال، والعلم النظري يحتاج",
        "لا فرق بينهما",
        "العلم الضروري يتعلق بالدين، والعلم النظري يتعلق بالدنيا",
      ],
      answer: "العلم الضروري لا يحتاج إلى استدلال، والعلم النظري يحتاج",
    },
    {
      question: "ما هي الصفات الأربع التي تجنب الإنسان الخسران وفقًا لسورة العصر؟",
      options: [
        "الإيمان، العمل الصالح، التواصي بالحق، التواصي بالصبر",
        "الإيمان، الصدقة، الصلاة، الصيام",
        "الإيمان، العمل الصالح، التوكل على الله، الصبر",
        "الإيمان، العمل الصالح، التواصي بالخير، التواصي بالعدل",
      ],
      answer: "الإيمان، العمل الصالح، التواصي بالحق، التواصي بالصبر",
    },
    {
      question: "ما هو تعريف التوحيد في اللغة؟",
      options: ["جعل الشيء واحدًا", "عبادة الله وحده", "الإيمان بالله ورسله", "جميع ما سبق"],
      answer: "جعل الشيء واحدًا",
    },
    {
      question: "ما هو تعريف التوحيد في الاصطلاح؟",
      options: ["إفراد الله بالعبادة", "الإيمان بالله ورسله", "عبادة الله وحده دون سواه", "جميع ما سبق"],
      answer: "إفراد الله بالعبادة",
    },
    {
      question: "ما هي الآية التي تدل على أن الله لا يرضى بالشرك؟",
      options: [
        "{وَاعْبُدُوا اللَّهَ وَلا تُشْرِكُوا بِهِ شَيْئاً}",
        "{إِنَّ اللَّهَ لا يَغْفِرُ أَنْ يُشْرَكَ بِهِ}",
        "{قُلْ هُوَ اللَّهُ أَحَدٌ}",
        "{الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ}",
      ],
      answer: "{وَاعْبُدُوا اللَّهَ وَلا تُشْرِكُوا بِهِ شَيْئاً}",
    },
    {
      question: "ما هي الآية التي تدل على أن الله لا يغفر الشرك؟",
      options: [
        "{إِنَّ اللَّهَ لا يَغْفِرُ أَنْ يُشْرَكَ بِهِ}",
        "{وَاعْبُدُوا اللَّهَ وَلا تُشْرِكُوا بِهِ شَيْئاً}",
        "{قُلْ هُوَ اللَّهُ أَحَدٌ}",
        "{الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ}",
      ],
      answer: "{إِنَّ اللَّهَ لا يَغْفِرُ أَنْ يُشْرَكَ بِهِ}",
    },
    {
      question: "ما هي الآية التي تدل على أن الله خلقنا من تراب؟",
      options: [
        "{وَمِنْ آيَاتِهِ أَنْ خَلَقَكُمْ مِنْ تُرَابٍ}",
        "{وَلَقَدْ خَلَقْنَا الْإِنْسَانَ مِنْ صَلْصَالٍ}",
        "{خَلَقَ الْإِنْسَانَ مِنْ صَلْصَالٍ كَالْفَخَّارِ}",
        "جميع ما سبق",
      ],
      answer: "جميع ما سبق",
    },
    {
      question: "ما هي الآية التي تدل على أن الله خلقنا من طين؟",
      options: [
        "{هُوَ الَّذِي خَلَقَكُمْ مِنْ طِينٍ}",
        "{وَلَقَدْ خَلَقْنَا الْإِنْسَانَ مِنْ صَلْصَالٍ}",
        "{خَلَقَ الْإِنْسَانَ مِنْ صَلْصَالٍ كَالْFخَّارِ}",
        "جميع ما سبق",
      ],
      answer: "{هُوَ الَّذِي خَلَقَكُمْ مِنْ طِينٍ}",
    },
    {
      question: "ما هي الآية التي تدل على أن الله خلقنا من صلصال؟",
      options: [
        "{وَلَقَدْ خَلَقْنَا الْإِنْسَانَ مِنْ صَلْصَالٍ}",
        "{خَلَقَ الْإِنْسَانَ مِنْ صَلْصَالٍ كَالْفَخَّارِ}",
        "{هُوَ الَّذِي خَلَقَكُمْ مِنْ طِينٍ}",
        "جميع ما سبق",
      ],
      answer: "{وَلَقَدْ خَلَقْنَا الْإِنْسَانَ مِنْ صَلْصَالٍ}",
    },
    {
      question: "ما هي الآية التي تدل على أن الله خلقنا من حمأ مسنون؟",
      options: [
        "{وَلَقَدْ خَلَقْنَا الْإِنْسَانَ مِنْ صَلْصَالٍ مِنْ حَمَأٍ مَسْنُونٍ}",
        "{خَلَقَ الْإِنْسَانَ مِنْ صَلْصَالٍ كَالْفَخَّارِ}",
        "{هُوَ الَّذِي خَلَقَكُمْ مِنْ طِينٍ}",
        "جميع ما سبق",
      ],
      answer: "{وَلَقَدْ خَلَقْنَا الْإِنْسَانَ مِنْ صَلْصَالٍ مِنْ حَمَأٍ مَسْنُونٍ}",
    },
    {
      question: "ما هي الآية التي تدل على أن الله خلقنا من نطفة؟",
      options: [
        "{أَلَمْ يَكُ نُطْفَةً مِنْ مَنِيٍّ يُمْنَى}",
        "{وَلَقَدْ خَلَقْنَا الْإِنْسَانَ مِنْ صَلْصَالٍ}",
        "{خَلَقَ الْإِنْسَانَ مِنْ صَلْصَالٍ كَالْفَخَّارِ}",
        "جميع ما سبق",
      ],
      answer: "{أَلَمْ يَكُ نُطْفَةً مِنْ مَنِيٍّ يُمْنَى}",
    },
    {
      question: "ما هي الآية التي تدل على أن الله خلقنا من علقة؟",
      options: [
        "{ثُمَّ كَانَ عَلَقَةً}",
        "{وَلَقَدْ خَلَقْنَا الْإِنْسَانَ مِنْ صَلْصَالٍ}",
        "{خَلَقَ الْإِنْسَانَ مِنْ صَلْصَالٍ كَالْفَخَّارِ}",
        "جميع ما سبق",
      ],
      answer: "{ثُمَّ كَانَ عَلَقَةً}",
    },
  ];

function Quiz({ setScore, setQuizStarted, saveScore }) {
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [selectedOption, setSelectedOption] = useState("");
  const [correctAnswers, setCorrectAnswers] = useState(0);

  const handleNext = () => {
    if (selectedOption === questions[currentQuestion].answer) {
      setCorrectAnswers((prev) => prev + 1); // Increment correct answers
    }
    setSelectedOption("");
    if (currentQuestion < questions.length - 1) {
      setCurrentQuestion((prev) => prev + 1);
    } else {
      const percentage = (correctAnswers / questions.length) * 100; // Calculate percentage
      setScore(percentage); // Update score in parent component
      saveScore(percentage); // Save percentage to Firestore
      setQuizStarted(false); // End the quiz
    }
  };

  return (
    <div className="quiz">
      <h2>{questions[currentQuestion].question}</h2>
      {questions[currentQuestion].options.map((option, index) => (
        <div key={index}>
          <label>
            <input
              type="radio"
              name="option"
              value={option}
              checked={selectedOption === option}
              onChange={() => setSelectedOption(option)}
            />
            {option}
          </label>
        </div>
      ))}
      <button onClick={handleNext}>التالي</button>
    </div>
  );
}

export default Quiz;